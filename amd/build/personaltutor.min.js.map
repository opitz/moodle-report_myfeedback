{"version":3,"file":"personaltutor.min.js","sources":["../src/personaltutor.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nrequire.config({\n    paths: {\n        'datatables.net': M.cfg.wwwroot + '/report/myfeedback/vendor/js/jquery.dataTables',\n        'datatables.net-buttons': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.buttons',\n        'datatables.net-colreorder': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.colReorder',\n        'datatables.net-fixedheader': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.fixedHeader',\n        'datatables.net-responsive': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.responsive',\n    },\n});\n\ndefine([\n    'jquery',\n    'core/str',\n    'datatables.net',\n    'datatables.net-buttons',\n    'datatables.net-colreorder',\n    'datatables.net-fixedheader',\n    'datatables.net-responsive',\n], function($, str) {\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n\n                $('#tutortable').DataTable({\n                    'dom': 'lfBrtip',\n                    fixedHeader: true,\n                    'order': [1, 'asc'],\n                    'columnDefs': [\n                        {'orderable': false, 'targets': 0}],\n                    buttons: ['colvis'],\n                    responsive: true\n                });\n\n                $('#selectall').change(function() {\n                    $('.chk1').prop('checked', $(this).prop('checked'));\n                });\n                $(\"#emailform\").click(function() {\n                    var mylink = [];\n                    $(\"input:checked\").each(function() {\n                        if ($(this).val() != 'on') {\n                            mylink.push($(this).val());\n                        }\n                    });\n                    if (mylink.length > 0) {\n                        // eslint-disable-next-line promise/always-return\n                        str.get_string('email_tutee_subject', 'report_myfeedback').then((emailTuteeSubject) => {\n                            $(\"a#mail\").attr(\"href\", \"mailto:?bcc=\" + mylink.join(\";\") + \"&Subject=\" + emailTuteeSubject + \"\");\n                        }).catch();\n                    }\n                });\n\n                $('.reportPrint').on('click', function() {\n                    print();\n                });\n\n                $('.ex_port').on('click', function() {\n                    window.location.href = 'export.php';\n                });\n\n                $('.tutorCanvas').click(function() {\n                    var thisEl = $(this).closest('tr.recordRow ').find('table.accord');\n                    if ($(thisEl).is(':visible')) {\n                        $(this).closest('.recordRow').find('table.accord').hide();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25bc');\n                    } else if ($(thisEl).is(':hidden')) {\n                        $(this).closest('.recordRow').find('table.accord').show();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25b2');\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["require","config","paths","M","cfg","wwwroot","define","$","str","init","document","ready","DataTable","dom","fixedHeader","order","columnDefs","orderable","targets","buttons","responsive","change","prop","this","click","mylink","each","val","push","length","get_string","then","emailTuteeSubject","attr","join","catch","on","print","window","location","href","thisEl","closest","find","is","hide","text","show"],"mappings":"AAeAA,QAAQC,OAAO,CACXC,MAAO,CACH,iBAAkBC,EAAEC,IAAIC,QAAU,iDAClC,yBAA0BF,EAAEC,IAAIC,QAAU,kDAC1C,4BAA6BF,EAAEC,IAAIC,QAAU,qDAC7C,6BAA8BF,EAAEC,IAAIC,QAAU,sDAC9C,4BAA6BF,EAAEC,IAAIC,QAAU,wDAIrDC,OAAM,kCAAC,CACH,SACA,WACA,iBACA,yBACA,4BACA,6BACA,8BACD,SAASC,EAAGC,KAEX,MAAO,CACHC,KAAM,WACFF,EAAEG,UAAUC,OAAM,WAEdJ,EAAE,eAAeK,UAAU,CACvBC,IAAO,UACPC,aAAa,EACbC,MAAS,CAAC,EAAG,OACbC,WAAc,CACV,CAACC,WAAa,EAAOC,QAAW,IACpCC,QAAS,CAAC,UACVC,YAAY,IAGhBb,EAAE,cAAcc,QAAO,WACnBd,EAAE,SAASe,KAAK,UAAWf,EAAEgB,MAAMD,KAAK,WAC5C,IACAf,EAAE,cAAciB,OAAM,WAClB,IAAIC,OAAS,GACblB,EAAE,iBAAiBmB,MAAK,WACC,MAAjBnB,EAAEgB,MAAMI,OACRF,OAAOG,KAAKrB,EAAEgB,MAAMI,MAE5B,IACIF,OAAOI,OAAS,GAEhBrB,IAAIsB,WAAW,sBAAuB,qBAAqBC,MAAMC,oBAC7DzB,EAAE,UAAU0B,KAAK,OAAQ,eAAiBR,OAAOS,KAAK,KAAO,YAAcF,kBAAuB,IACnGG,OAEX,IAEA5B,EAAE,gBAAgB6B,GAAG,SAAS,WAC1BC,OACJ,IAEA9B,EAAE,YAAY6B,GAAG,SAAS,WACtBE,OAAOC,SAASC,KAAO,YAC3B,IAEAjC,EAAE,gBAAgBiB,OAAM,WACpB,IAAIiB,OAASlC,EAAEgB,MAAMmB,QAAQ,iBAAiBC,KAAK,gBAC/CpC,EAAEkC,QAAQG,GAAG,aACbrC,EAAEgB,MAAMmB,QAAQ,cAAcC,KAAK,gBAAgBE,OACnDtC,EAAEgB,MAAMmB,QAAQ,cAAcC,KAAK,WAAWG,KAAK,MAC5CvC,EAAEkC,QAAQG,GAAG,aACpBrC,EAAEgB,MAAMmB,QAAQ,cAAcC,KAAK,gBAAgBI,OACnDxC,EAAEgB,MAAMmB,QAAQ,cAAcC,KAAK,WAAWG,KAAK,KAE3D,GACJ,GACJ,EAER"}