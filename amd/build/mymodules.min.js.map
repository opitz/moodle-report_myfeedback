{"version":3,"file":"mymodules.min.js","sources":["../src/mymodules.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nrequire.config({\n    paths: {\n        'datatables.net': M.cfg.wwwroot + '/report/myfeedback/vendor/js/jquery.dataTables.min',\n        'datatables.net-buttons': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.buttons.min',\n        'datatables.net-colreorder': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.colReorder.min',\n        'datatables.net-fixedheader': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.fixedHeader.min',\n        'datatables.net-responsive': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.responsive.min',\n    },\n});\n\ndefine([\n    'jquery',\n    'core/str',\n    'datatables.net',\n    'datatables.net-buttons',\n    'datatables.net-colreorder',\n    'datatables.net-fixedheader',\n    'datatables.net-responsive',\n], function($, str) {\n\n    const strings = [\n        {\n            key: 'dashboard_students',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_due_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_nonsub_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_late_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_graded_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_low_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'dashboard_assessments',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_assessment_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_nonsubmissions_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_latesubmissions_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_graded_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_lowgrades_info',\n            component: 'report_myfeedback',\n        },\n    ];\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n                // Populate strings.\n                const stringResults = {};\n                str.get_strings(strings).then(results => results.forEach((val, key) => {\n                    const string = strings[key];\n                    stringResults[string.key] = val;\n                })).catch();\n\n                // Create the DataTable.\n                $('.modtable').DataTable({\n                    dom: '',\n                    fixedHeader: true,\n                    columnDefs: [\n                        {\n                            targets: [0, 1, 2, 3, 4, 5, 6],\n                            searchable: false,\n                            orderable: false\n                        }\n                    ],\n                    order: []\n                });\n\n                $('.overallgrade').show();\n                $('span.studentsassessed').text(stringResults.dashboard_students);\n                $('.studentimgdue').attr('title', stringResults.student_due_info);\n                $('.studentimgnon').attr('title', stringResults.student_nonsub_info);\n                $('.studentimglate').attr('title', stringResults.student_late_info);\n                $('.studentimggraded').attr('title', stringResults.student_graded_info);\n                $('.studentimglow').attr('title', stringResults.student_low_info);\n\n                $('.ex_port').on('click', function() {\n                    window.location.href = 'export.php';\n                });\n\n                $('.reportPrint').on('click', function() {\n                    print();\n                });\n\n                $('td#assess-name').css({\n                    'max-width': '300px',\n                    'white-space': 'nowrap',\n                    'overflow': 'hidden',\n                    'text-overflow': 'ellipsis'\n                });\n\n                $('.sToggle').click(function() {\n                    $(this).closest('.fullRec').find('table.tutor-inner.assRec').hide();\n                    $(this).closest('.fullRec').find('table.tutor-inner.stuRecP').hide();\n                    $('.settableheight').hide();\n                    $('.overallgrade').hide();\n                    $('.assessdue').show();\n                    $('span.studentsassessed').text(stringResults.dashboard_assessments);\n                    $('.studentimgdue').attr('title', stringResults.tutortblheader_assessment_info);\n                    $('.studentimgnon').attr('title', stringResults.tutortblheader_nonsubmissions_info);\n                    $('.studentimglate').attr('title', stringResults.tutortblheader_latesubmissions_info);\n                    $('.studentimggraded').attr('title', stringResults.tutortblheader_graded_info);\n                    $('.studentimglow').attr('title', stringResults.tutortblheader_lowgrades_info);\n                    $(this).closest('.fullRec').find('table.tutor-inner.stuRecM').show();\n                    $(this).closest('.fullRec').find('span.aToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                    $(this).closest('.fullRec').find('span.sToggle').css({\n                        'background-color': '#619eb6',\n                        'color': '#fff'\n                    });\n                });\n                $('.aToggle').click(function() {\n                    $(this).closest('.fullRec').find('table.tutor-inner.stuRecM').hide();\n                    $(this).closest('.fullRec').find('table.tutor-inner.assRec').show();\n                    $('.settableheight').show();\n                    $('.overallgrade').show();\n                    $('span.studentsassessed').text(stringResults.dashboard_students);\n                    $('.studentimgdue').attr('title', stringResults.student_due_info);\n                    $('.studentimgnon').attr('title', stringResults.student_nonsub_info);\n                    $('.studentimglate').attr('title', stringResults.student_late_info);\n                    $('.studentimggraded').attr('title', stringResults.student_graded_info);\n                    $('.studentimglow').attr('title', stringResults.student_low_info);\n                    $('.modtable .modangle').text('\\u25bc');\n                    $(this).closest('.fullRec').find('span.aToggle').css({\n                        'background-color': '#619eb6',\n                        'color': '#fff'\n                    });\n                    $(this).closest('.fullRec').find('span.sToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                });\n\n                $('.assess-br').click(function() {\n                    var thisAs = $(this).closest('.assRec');\n                    var rem = '.stuRecP.' + $(thisAs).attr('data-aid');\n                    if ($(rem).is(':visible')) {\n                        $(rem).nextUntil('.settableheight').hide();\n                        $(rem).hide();\n                        $('.assessdue').hide();\n                        $(thisAs).find('.modangle').text('\\u25bc');\n                    } else if ($(rem).is(':hidden')) {\n                        $(rem).nextUntil(':not(rem)').show();\n                        $(rem).show();\n                        $('.assessdue').hide();\n                        $(thisAs).find('.modangle').text('\\u25b2');\n                    }\n                });\n\n            });\n        }\n    };\n});\n"],"names":["require","config","paths","M","cfg","wwwroot","define","$","str","strings","key","component","init","document","ready","stringResults","get_strings","then","results","forEach","val","catch","DataTable","dom","fixedHeader","columnDefs","targets","searchable","orderable","order","show","text","dashboard_students","attr","student_due_info","student_nonsub_info","student_late_info","student_graded_info","student_low_info","on","window","location","href","print","css","overflow","click","this","closest","find","hide","dashboard_assessments","tutortblheader_assessment_info","tutortblheader_nonsubmissions_info","tutortblheader_latesubmissions_info","tutortblheader_graded_info","tutortblheader_lowgrades_info","color","thisAs","rem","is","nextUntil"],"mappings":"AAeAA,QAAQC,OAAO,CACXC,MAAO,CACH,iBAAkBC,EAAEC,IAAIC,QAAU,qDAClC,yBAA0BF,EAAEC,IAAIC,QAAU,sDAC1C,4BAA6BF,EAAEC,IAAIC,QAAU,yDAC7C,6BAA8BF,EAAEC,IAAIC,QAAU,0DAC9C,4BAA6BF,EAAEC,IAAIC,QAAU,4DAIrDC,OAAM,8BAAC,CACH,SACA,WACA,iBACA,yBACA,4BACA,6BACA,8BACD,SAASC,EAAGC,KAEX,MAAMC,QAAU,CACZ,CACIC,IAAK,qBACLC,UAAW,qBAEf,CACID,IAAK,mBACLC,UAAW,qBAEf,CACID,IAAK,sBACLC,UAAW,qBAEf,CACID,IAAK,oBACLC,UAAW,qBAEf,CACID,IAAK,sBACLC,UAAW,qBAEf,CACID,IAAK,mBACLC,UAAW,qBAEf,CACID,IAAK,wBACLC,UAAW,qBAEf,CACID,IAAK,iCACLC,UAAW,qBAEf,CACID,IAAK,qCACLC,UAAW,qBAEf,CACID,IAAK,sCACLC,UAAW,qBAEf,CACID,IAAK,6BACLC,UAAW,qBAEf,CACID,IAAK,gCACLC,UAAW,sBAInB,MAAO,CACHC,KAAM,WACFL,EAAEM,UAAUC,OAAM,WAEd,MAAMC,cAAgB,CAAA,EACtBP,IAAIQ,YAAYP,SAASQ,MAAKC,SAAWA,QAAQC,SAAQ,CAACC,IAAKV,OAE3DK,cADeN,QAAQC,KACFA,KAAOU,GAAG,MAC/BC,QAGJd,EAAE,aAAae,UAAU,CACrBC,IAAK,GACLC,aAAa,EACbC,WAAY,CACR,CACIC,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5BC,YAAY,EACZC,WAAW,IAGnBC,MAAO,KAGXtB,EAAE,iBAAiBuB,OACnBvB,EAAE,yBAAyBwB,KAAKhB,cAAciB,oBAC9CzB,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcmB,kBAChD3B,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcoB,qBAChD5B,EAAE,mBAAmB0B,KAAK,QAASlB,cAAcqB,mBACjD7B,EAAE,qBAAqB0B,KAAK,QAASlB,cAAcsB,qBACnD9B,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcuB,kBAEhD/B,EAAE,YAAYgC,GAAG,SAAS,WACtBC,OAAOC,SAASC,KAAO,YAC3B,IAEAnC,EAAE,gBAAgBgC,GAAG,SAAS,WAC1BI,OACJ,IAEApC,EAAE,kBAAkBqC,IAAI,CACpB,YAAa,QACb,cAAe,SACfC,SAAY,SACZ,gBAAiB,aAGrBtC,EAAE,YAAYuC,OAAM,WAChBvC,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,4BAA4BC,OAC7D3C,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,6BAA6BC,OAC9D3C,EAAE,mBAAmB2C,OACrB3C,EAAE,iBAAiB2C,OACnB3C,EAAE,cAAcuB,OAChBvB,EAAE,yBAAyBwB,KAAKhB,cAAcoC,uBAC9C5C,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcqC,gCAChD7C,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcsC,oCAChD9C,EAAE,mBAAmB0B,KAAK,QAASlB,cAAcuC,qCACjD/C,EAAE,qBAAqB0B,KAAK,QAASlB,cAAcwC,4BACnDhD,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcyC,+BAChDjD,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,6BAA6BnB,OAC9DvB,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,gBAAgBL,IAAI,CACjD,mBAAoB,UACpBa,MAAS,SAEblD,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,gBAAgBL,IAAI,CACjD,mBAAoB,UACpBa,MAAS,QAEjB,IACAlD,EAAE,YAAYuC,OAAM,WAChBvC,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,6BAA6BC,OAC9D3C,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,4BAA4BnB,OAC7DvB,EAAE,mBAAmBuB,OACrBvB,EAAE,iBAAiBuB,OACnBvB,EAAE,yBAAyBwB,KAAKhB,cAAciB,oBAC9CzB,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcmB,kBAChD3B,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcoB,qBAChD5B,EAAE,mBAAmB0B,KAAK,QAASlB,cAAcqB,mBACjD7B,EAAE,qBAAqB0B,KAAK,QAASlB,cAAcsB,qBACnD9B,EAAE,kBAAkB0B,KAAK,QAASlB,cAAcuB,kBAChD/B,EAAE,uBAAuBwB,KAAK,KAC9BxB,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,gBAAgBL,IAAI,CACjD,mBAAoB,UACpBa,MAAS,SAEblD,EAAEwC,MAAMC,QAAQ,YAAYC,KAAK,gBAAgBL,IAAI,CACjD,mBAAoB,UACpBa,MAAS,QAEjB,IAEAlD,EAAE,cAAcuC,OAAM,WAClB,IAAIY,OAASnD,EAAEwC,MAAMC,QAAQ,WACzBW,IAAM,YAAcpD,EAAEmD,QAAQzB,KAAK,YACnC1B,EAAEoD,KAAKC,GAAG,aACVrD,EAAEoD,KAAKE,UAAU,mBAAmBX,OACpC3C,EAAEoD,KAAKT,OACP3C,EAAE,cAAc2C,OAChB3C,EAAEmD,QAAQT,KAAK,aAAalB,KAAK,MAC1BxB,EAAEoD,KAAKC,GAAG,aACjBrD,EAAEoD,KAAKE,UAAU,aAAa/B,OAC9BvB,EAAEoD,KAAK7B,OACPvB,EAAE,cAAc2C,OAChB3C,EAAEmD,QAAQT,KAAK,aAAalB,KAAK,KAEzC,GAEJ,GACJ,EAER"}